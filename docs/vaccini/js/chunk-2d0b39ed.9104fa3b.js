(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b39ed"],{"28c4":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"consegne"},[o("loading",{attrs:{active:e.isLoading,"can-cancel":!1,"zon-cancel":"onCancel","is-full-page":!0},on:{"update:active":function(t){e.isLoading=t}}}),o("ScelteConsegne",{model:{value:e.scelte,callback:function(t){e.scelte=t},expression:"scelte"}}),e._v(" TOTALE: "+e._s(e._f("toNumber")(e.totale))+" "),o("Grafico",{attrs:{"chart-data":e.datiGrafico,options:e.options}})],1)},n=[],i=(o("4de4"),o("13d5"),o("b64b"),o("07ac"),o("159b"),o("d81d"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"scelte_consegne"},[e._v(" SCELTE: Periodo "),o("select",{directives:[{name:"model",rawName:"v-model",value:e.value.periodo,expression:"value.periodo"}],on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.value,"periodo",t.target.multiple?o:o[0])}}},[o("option",{attrs:{value:"last_21"}},[e._v("Ultimi 21 giorni")]),o("option",{attrs:{value:"last_180"}},[e._v("Ultimi 6 mesi")]),o("option",{attrs:{value:"all"}},[e._v("Tutto")])]),o("br"),e._v(" Grafico "+e._s(e.value.manip)+" "),o("select",{directives:[{name:"model",rawName:"v-model",value:e.value.manip,expression:"value.manip"}],on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.value,"manip",t.target.multiple?o:o[0])}}},[o("option",{attrs:{value:""}},[e._v("Giorno per giorno")]),o("option",{attrs:{value:"incremental"}},[e._v("Incrementale")])]),o("br"),e._v(" Andamento "+e._s(e.value.group_by)+" "),o("select",{directives:[{name:"model",rawName:"v-model",value:e.value.group_by,expression:"value.group_by"}],on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.value,"group_by",t.target.multiple?o:o[0])}}},[o("option",{attrs:{value:"tot"}},[e._v("Totale")]),o("option",{attrs:{value:"reg"}},[e._v("Regione")]),o("option",{attrs:{value:"for"}},[e._v("Fornitore")])]),o("br"),e._v(" Regione "+e._s(e.value.regione)+" "),o("select",{directives:[{name:"model",rawName:"v-model",value:e.value.regione,expression:"value.regione"}],on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.value,"regione",t.target.multiple?o:o[0])}}},[o("option",{attrs:{value:"all"}},[e._v("Tutte")]),o("option",[e._v("Abruzzo")]),o("option",[e._v("Basilicata")]),o("option",[e._v("Calabria")]),o("option",[e._v("Campania")]),o("option",[e._v("Emilia-Romagna")]),o("option",[e._v("Friuli-Venezia Giulia")]),o("option",[e._v("Lazio")]),o("option",[e._v("Liguria")]),o("option",[e._v("Lombardia")]),o("option",[e._v("Marche")]),o("option",[e._v("Molise")]),o("option",[e._v("Provincia Autonoma Bolzano / Bozen")]),o("option",[e._v("Provincia Autonoma Trento")]),o("option",[e._v("Piemonte")]),o("option",[e._v("Puglia")]),o("option",[e._v("Sardegna")]),o("option",[e._v("Sicilia")]),o("option",[e._v("Toscana")]),o("option",[e._v("Umbria")]),o("option",[e._v("Valle d'Aosta / Vall√©e d'Aoste")]),o("option",[e._v("Veneto")])])])}),r=[],l={name:"ScelteConsegne",props:["value"]},u=l,c=o("2877"),s=Object(c["a"])(u,i,r,!1,null,null,null),v=s.exports,p=o("79dd"),d=o("9062"),_=o.n(d),m=(o("e40d"),o("5fdb")),f=o("be03"),g=o("87d4"),b={name:"Consegne",components:{Loading:_.a,ScelteConsegne:v,Grafico:p["a"]},data:function(){return{isLoading:!1,scelte:{periodo:"last_180",group_by:"tot",manip:"incremental",regione:"all"},totale:0,options:m["a"]}},computed:{datiGrafico:function(){var e=this,t=e.datiPeriodo(e.scelte.periodo);return"all"!=e.scelte.regione&&(t=t.filter((function(t){return t.nome_area==e.scelte.regione}))),"reg"==e.scelte.group_by?e.datiRegione(t):"for"==e.scelte.group_by?e.datiFornitore(t):e.datiTutto(t)}},created:function(){window.consegne||this.caricaConsegne()},methods:{datiTutto:function(e){var t=this,o=0,a=e.reduce((function(e,t){var a=Object(f["a"])(t.data_consegna);return e[a]||(e[a]=0),e[a]+=t.numero_dosi,o+=t.numero_dosi,e}),{});return t.totale=o,{labels:Object.keys(a),datasets:[{label:"Complessivo",fill:!1,data:Object(f["c"])(Object.values(a),t.scelte.manip)}]}},datiRegione:function(e){var t=this,o=0,a=[];e.forEach((function(e){a.indexOf(e.nome_area)<0&&a.push(e.nome_area)}));var n=e.reduce((function(e,t){var a=Object(f["a"])(t.data_consegna);return e[a]||(e[a]={}),e[a][t.nome_area]||(e[a][t.nome_area]=0),e[a][t.nome_area]+=t.numero_dosi,o+=t.numero_dosi,e}),{});return t.totale=o,{labels:Object.keys(n),datasets:a.map((function(e){return{label:e,fill:!1,data:Object(f["c"])(Object.values(n).map((function(t){return t[e]?t[e]:0})),t.scelte.manip)}}))}},datiFornitore:function(e){var t=this,o=0,a=[];e.forEach((function(e){a.indexOf(e.fornitore)<0&&a.push(e.fornitore)}));var n=e.reduce((function(e,t){var a=Object(f["a"])(t.data_consegna);return e[a]||(e[a]={}),e[a][t.fornitore]||(e[a][t.fornitore]=0),e[a][t.fornitore]+=t.numero_dosi,o+=t.numero_dosi,e}),{});return t.totale=o,{labels:Object.keys(n),datasets:a.map((function(e){return{label:e,fill:!1,data:Object(f["c"])(Object.values(n).map((function(t){return t[e]?t[e]:0})),t.scelte.manip)}}))}},datiPeriodo:function(e){if(!window.consegne)return[];var t=window.consegne.data,o=null;return"last_21"==e&&(o=22),"last_180"==e&&(o=181),Object(f["b"])(t,"data_consegna",o)},caricaConsegne:function(){var e=this;e.isLoading=!0;var t=e.scelte.group_by;e.scelte.group_by="NONE",Object(g["a"])((function(){e.isLoading=!1,e.scelte.group_by=t}))}}},h=b,y=Object(c["a"])(h,a,n,!1,null,null,null);t["default"]=y.exports}}]);
//# sourceMappingURL=chunk-2d0b39ed.9104fa3b.js.map