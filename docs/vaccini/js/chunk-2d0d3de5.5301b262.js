(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d3de5"],{"5f31":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mondo"},[a("loading",{attrs:{active:e.isLoading,"can-cancel":!1,"zon-cancel":"onCancel","is-full-page":!0},on:{"update:active":function(t){e.isLoading=t}}}),a("ScelteMondo",{attrs:{paesi:e.paesi,aree:e.aree},model:{value:e.scelte,callback:function(t){e.scelte=t},expression:"scelte"}}),a("br"),a("Grafico",{attrs:{"chart-data":e.datiGrafico,options:e.options}})],1)},n=[],r=(a("4de4"),a("13d5"),a("b64b"),a("d81d"),a("07ac"),a("159b"),a("fb6a"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle.scelte_mondo",modifiers:{scelte_mondo:!0}}],staticStyle:{"padding-top":"10px","padding-bottom":"10px","min-height":"45px"}},[a("span",{staticClass:"when-opened",staticStyle:{float:"left","padding-left":"20px"}},[e._v(" Personalizza ")]),a("span",{staticClass:"when-closed",staticStyle:{float:"left","padding-left":"20px"}},[e._v(" "),a("b-badge",{attrs:{pill:"",variant:"primary"}},[e._v(e._s(e.periodoH))]),e._v(" "),a("b-badge",{attrs:{pill:"",variant:"info"}},[e._v(e._s(e.manipH))]),e._v(" "),a("b-badge",{attrs:{pill:"",variant:"dark"}},[e._v(e._s(e.paeseH))]),e._v(" "),e.value.prov?a("b-badge",{attrs:{pill:"",variant:"light"}},[e._v(e._s(e.provH))]):e._e()],1),a("span",{staticClass:"when-opened"},[a("b-icon",{attrs:{icon:"x","aria-hidden":"true"}})],1),a("span",{staticClass:"when-closed"},[a("b-icon",{attrs:{icon:"chevron-right","aria-hidden":"true"}})],1)]),a("b-collapse",{attrs:{id:"scelte_mondo"}},[a("b-input-group",{staticClass:"mb-2 mr-sm-2 mb-sm-0 periodo",attrs:{prepend:"Periodo"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.value.periodo,expression:"value.periodo"}],staticClass:"custom-select",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.value,"periodo",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"last_21"}},[e._v("Ultimi 21 giorni")]),a("option",{attrs:{value:"last_180"}},[e._v("Ultimi 6 mesi")]),a("option",{attrs:{value:"all"}},[e._v("Tutto")])])]),a("b-input-group",{staticClass:"mb-2 mr-sm-2 mb-sm-0 grafico",attrs:{prepend:"Grafico"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.value.manip,expression:"value.manip"}],staticClass:"custom-select",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.value,"manip",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[e._v("Giorno per giorno")]),a("option",{attrs:{value:"incremental"}},[e._v("Incrementale")])])]),a("b-input-group",{staticClass:"mb-2 mr-sm-2 mb-sm-0 paese",attrs:{prepend:"Paese"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.value.paese,expression:"value.paese"}],staticClass:"custom-select",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.value,"paese",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"all"}},[e._v("Tutti")]),a("option",{attrs:{value:"top_dec"}},[e._v("Top 15 Deceduti")]),a("option",{attrs:{value:"top_ter"}},[e._v("Top 15 Terapie Intensive")]),a("option",{attrs:{value:"top_cas"}},[e._v("Top 15 Casi")]),e._l(e.listaPaesi,(function(t){return a("option",{key:t},[e._v(e._s(t))])}))],2)]),e.showAree?a("b-input-group",{staticClass:"mb-2 mr-sm-2 mb-sm-0 prov",attrs:{prepend:"Area"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.value.prov,expression:"value.prov"}],staticClass:"custom-select",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.value,"prov",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"all"}},[e._v("Tutte")]),e._l(e.listaAree,(function(t){return a("option",{key:t},[e._v(e._s(t))])}))],2)]):e._e()],1)],1)}),o=[],s={name:"ScelteMondo",props:["value","paesi","aree"],computed:{listaPaesi:function(){return this.paesi||[]},listaAree:function(){return this.aree[this.value.paese]||[]},periodoH:function(){return"last_21"==this.value.periodo?"Ultimi 21 giorni":"last_180"==this.value.periodo?"Ultimi 6 mesi":"Periodo completo"},manipH:function(){return"incremental"==this.value.manip?"Incrementale":"Giorno per giorno"},paeseH:function(){return"all"==this.value.regione?"Tutta il mondo":this.value.regione},provH:function(){return"all"==this.value.regione?"Tutta Italia":this.value.regione},showAree:function(){return this.aree.length>0}}},l=s,c=a("2877"),u=Object(c["a"])(l,r,o,!1,null,null,null),p=u.exports,d=a("79dd"),v=a("9062"),m=a.n(v),f=(a("e40d"),a("5fdb")),_=a("be03"),b=a("87d4"),g={name:"Consegne",components:{Loading:m.a,ScelteMondo:p,Grafico:d["a"]},data:function(){return{isLoading:!1,scelte:{periodo:"last_180",manip:"incremental",paese:"all",prov:"all"},paesi:["Italia"],aree:{Italia:[1,2,3]},options:f["a"]}},computed:{datiGrafico:function(){var e=this,t=e.datiPeriodo(e.scelte.periodo);return"all"!=e.scelte.regione&&(t=t.filter((function(t){return t.nome_area==e.scelte.regione}))),"top_dec"==e.scelte.paese?e.datiTop(t,"morti"):"top_ter"==e.scelte.paese?e.datiTop(t,"ricoveri"):"top_cas"==e.scelte.paese?e.datiTop(t,"casi"):("all"==e.scelte.paese||(t=t.filter((function(t){return t.country==e.scelte.paese}))),e.datiTutto(t))}},created:function(){window.mondo||this.caricaMondo(),this.caricaPaesi()},methods:{datiTutto:function(e){var t=this,a={casi:"Casi",morti:"Decessi",ricoveri:"Terapie Intensive"},i=e.reduce((function(e,t){var a=Object(_["a"])(t.data);return e[a]||(e[a]={casi:0,morti:0,ricoveri:0}),e[a].casi+=t.casi,e[a].morti+=t.morti,e[a].ricoveri+=parseInt(t.ricoveri)||0,e}),{});return{labels:Object.keys(i),datasets:Object.keys(a).map((function(e){return{label:a[e],fill:!1,data:Object(_["c"])(Object.values(i).map((function(t){return t[e]?t[e]:0})),t.scelte.manip)}}))}},datiTop:function(e,t){var a=this,i={},n="max_".concat(t);e.forEach((function(e){i[e.country]||(i[e.country]={c:e.country,v:0}),i[e.country].v<e[n]&&(i[e.country].v=e[n])})),i=Object.values(i).sort((function(e,t){return e.v>t.v?-1:e.v<t.v?1:0})),i=i.map((function(e){return e.c})).slice(0,15),e=e.filter((function(e){return!(i.indexOf(e.country)<0)}));var r=e.reduce((function(e,a){var i=Object(_["a"])(a.data);return e[i]||(e[i]={}),e[i][a.country]||(e[i][a.country]=0),e[i][a.country]+=a[t],e}),{});return{labels:Object.keys(r),datasets:i.map((function(e){return{label:e,fill:!1,data:Object(_["c"])(Object.values(r).map((function(t){return t[e]?t[e]:0})),a.scelte.manip)}}))}},datiPeriodo:function(e){if(!window.mondo)return[];var t=window.mondo,a=null;return"last_21"==e&&(a=22),"last_180"==e&&(a=181),t=Object(_["b"])(t,"data",a),t},caricaMondo:function(){var e=this;e.isLoading=!0;var t=e.scelte.periodo;e.scelte.periodo="NONE",Object(b["b"])((function(){e.isLoading=!1,e.scelte.periodo=t,e.caricaPaesi()}))},caricaPaesi:function(){var e=this;e.paesi=[],e.aree={},window.mondo&&(window.mondo.forEach((function(t){t.country&&(e.paesi.indexOf(t.country)<0&&e.paesi.push(t.country),t.area&&(e.aree[t.country]||(e.aree[t.country]=[]),e.aree[t.country].indexOf(t.area)<0&&(e.aree[t.country].push(t.area),e.aree[t.country]=e.aree[t.country].sort())))})),e.paesi=e.paesi.sort())}}},h=g,y=Object(c["a"])(h,i,n,!1,null,null,null);t["default"]=y.exports}}]);
//# sourceMappingURL=chunk-2d0d3de5.5301b262.js.map