(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b39ed"],{"28c4":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"consegne"},[a("loading",{attrs:{active:e.isLoading,"can-cancel":!1,"zon-cancel":"onCancel","is-full-page":!0},on:{"update:active":function(t){e.isLoading=t}}}),a("ScelteConsegne",{model:{value:e.scelte,callback:function(t){e.scelte=t},expression:"scelte"}}),e._v(" TOTALE: "+e._s(e._f("toNumber")(e.totale))+" "),a("Grafico",{attrs:{"chart-data":e.datiGrafico,options:e.options}})],1)},o=[],r=(a("13d5"),a("b64b"),a("07ac"),a("159b"),a("d81d"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"scelte_consegne"},[e._v(" SCELTE: Periodo "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.value.periodo,expression:"value.periodo"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.value,"periodo",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"last_21"}},[e._v("Ultimi 21 giorni")]),a("option",{attrs:{value:"last_180"}},[e._v("Ultimi 6 mesi")]),a("option",{attrs:{value:"all"}},[e._v("Tutto")])]),a("br"),e._v(" Grafico "+e._s(e.value.manip)+" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.value.manip,expression:"value.manip"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.value,"manip",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[e._v("Giorno per giorno")]),a("option",{attrs:{value:"incremental"}},[e._v("Incrementale")])]),a("br"),e._v(" Andamento "+e._s(e.value.group_by)+" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.value.group_by,expression:"value.group_by"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.value,"group_by",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"tot"}},[e._v("Totale")]),a("option",{attrs:{value:"reg"}},[e._v("Regione")]),a("option",{attrs:{value:"for"}},[e._v("Fornitore")])])])}),i=[],l={name:"ScelteConsegne",props:["value"]},s=l,c=a("2877"),u=Object(c["a"])(s,r,i,!1,null,null,null),d=u.exports,v=a("79dd"),p=a("9062"),f=a.n(p),m=(a("e40d"),a("5fdb")),_=a("be03"),g=a("87d4"),b={name:"Consegne",components:{Loading:f.a,ScelteConsegne:d,Grafico:v["a"]},data:function(){return{isLoading:!1,scelte:{periodo:"last_180",group_by:"tot",manip:""},totale:0,options:m["a"]}},computed:{datiGrafico:function(){var e=this.datiPeriodo(this.scelte.periodo);return"reg"==this.scelte.group_by?this.datiRegione(e):"for"==this.scelte.group_by?this.datiFornitore(e):this.datiTutto(e)}},created:function(){window.consegne||this.caricaConsegne()},methods:{datiTutto:function(e){var t=this,a=0,n=e.reduce((function(e,t){var n=Object(_["a"])(t.data_consegna);return e[n]||(e[n]=0),e[n]+=t.numero_dosi,a+=t.numero_dosi,e}),{});return t.totale=a,{labels:Object.keys(n),datasets:[{label:"Complessivo",fill:!1,data:Object(_["c"])(Object.values(n),t.scelte.manip)}]}},datiRegione:function(e){var t=this,a=0,n=[];e.forEach((function(e){n.indexOf(e.nome_area)<0&&n.push(e.nome_area)}));var o=e.reduce((function(e,t){var n=Object(_["a"])(t.data_consegna);return e[n]||(e[n]={}),e[n][t.nome_area]||(e[n][t.nome_area]=0),e[n][t.nome_area]+=t.numero_dosi,a+=t.numero_dosi,e}),{});return t.totale=a,{labels:Object.keys(o),datasets:n.map((function(e){return{label:e,fill:!1,data:Object(_["c"])(Object.values(o).map((function(t){return t[e]?t[e]:0})),t.scelte.manip)}}))}},datiFornitore:function(e){var t=this,a=0,n=[];e.forEach((function(e){n.indexOf(e.fornitore)<0&&n.push(e.fornitore)}));var o=e.reduce((function(e,t){var n=Object(_["a"])(t.data_consegna);return e[n]||(e[n]={}),e[n][t.fornitore]||(e[n][t.fornitore]=0),e[n][t.fornitore]+=t.numero_dosi,a+=t.numero_dosi,e}),{});return t.totale=a,{labels:Object.keys(o),datasets:n.map((function(e){return{label:e,fill:!1,data:Object(_["c"])(Object.values(o).map((function(t){return t[e]?t[e]:0})),t.scelte.manip)}}))}},datiPeriodo:function(e){if(!window.consegne)return[];var t=window.consegne.data,a=null;return"last_21"==e&&(a=22),"last_180"==e&&(a=181),Object(_["b"])(t,"data_consegna",a)},caricaConsegne:function(){var e=this;e.isLoading=!0;var t=e.scelte.group_by;e.scelte.group_by="NONE",Object(g["a"])((function(){e.isLoading=!1,e.scelte.group_by=t}))}}},h=b,O=Object(c["a"])(h,n,o,!1,null,null,null);t["default"]=O.exports}}]);
//# sourceMappingURL=chunk-2d0b39ed.ba6d53cb.js.map